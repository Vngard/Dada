<link rel="import" href="../../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="dada-table.html">

<dom-module id="dada-action">
    <template>
        <style>
             :host {
                display: block;
            }

            .papertabs-style {
                --paper-tabs-selection-bar-color: black;
            }
            
            .custom-slide {
                display: flex;
                margin-left: auto;
                margin-right: auto;
            }

            .close {
                position: relative;
                float: right;
                margin-right: 2em;
            }
            
        </style>
        <paper-tabs class="papertabs-style" selected="{{selected}}">
            <paper-tab class="papertab-style" on-click="_activeChanged">
                <div>
                    <img src="src/img/device.png" class="custom-slide" />
                    <p>Choisir</p>
                </div>
            </paper-tab>
            <paper-tab class="papertab-style" on-click="_activeChanged">Acheter</paper-tab>
            <paper-tab class="papertab-style" on-click="_activeChanged">Visiter</paper-tab>
        </paper-tabs>

        <iron-collapse id="collapse">
            <iron-pages selected="{{selected}}">
                <div>
                    <div class="close">
                        <iron-icon icon="icons:close" on-click="closeCollapse"></iron-icon>
                    </div>
                    <div>
                        <img src="src/img/choix.png" class="custom-slide"></img>
                    </div>
                </div>
                <div>
                    <div class="close">
                        <iron-icon icon="icons:close" on-click="closeCollapse"></iron-icon>
                    </div>
                    <div>
                        <dada-table></dada-table>
                    </div>
                </div>
                <div>
                    <div class="close">
                        <iron-icon icon="icons:close" on-click="closeCollapse"></iron-icon>
                    </div>
                    <div>
                        <img src="src/img/visiter.png" class="custom-slide"></img>
                    </div>
                </div>
            </iron-pages>
        </iron-collapse>


    </template>

    <script>
        /**
     * @customElement
     * @polymer
     */
        class DadaAction extends Polymer.Element {
            static get is() { return 'dada-action'; }
            static get properties() {
                return {
                    selected: {
                        type: String,
                        value: '0'
                    }
                };
            }

            closeCollapse() {
                console.log('plop close ', arguments);
                this.$.collapse.toggle();
            }
            _activeChanged() {
                console.log("collapse state : ", this.$.collapse.opened, this.$.collapse)
                if (!this.$.collapse.opened) {
                    this.$.collapse.toggle();
                }
            }
        }


        window.customElements.define(DadaAction.is, DadaAction);
    </script>
</dom-module>
